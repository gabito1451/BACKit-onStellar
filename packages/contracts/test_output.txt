cargo : warning: unused 
imports: `Bytes` and 
`Ledger`
At line:1 char:1
+ cargo test --package 
outcome-manager 2>&1 | 
Out-File -FilePath test_o 
...
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~
~~~~~~~~~~~~~~~
    + CategoryInfo          
    : NotSpecified: (warni  
  ng: unused...s` and `Le   
 dger`:String) [], Remot    
eException
    + FullyQualifiedErrorId 
    : NativeCommandError
 
 --> outcome_manager\src\tes
t.rs:4:31
  |
4 |     testutils::{Address 
as _, Ledger},
  |                         
      ^^^^^^
5 |     Address, Bytes, 
BytesN, Env, Vec,
  |              ^^^^^
  |
  = note: 
`#[warn(unused_imports)]` 
(part of `#[warn(unused)]`) 
on by default

warning: unused import: 
`Outcome`
 --> outcome_manager\src\tes
t.rs:9:22
  |
9 | use 
crate::storage::{Outcome, 
SignedOutcome};
  |                      
^^^^^^^

warning: use of deprecated 
method `soroban_sdk::events:
:Events::publish`: use the 
#[contractevent] macro on a 
contract event type
 --> outcome_manager\src\eve
nts.rs:5:18
  |
5 |     
env.events().publish(
  |                  ^^^^^^^
  |
  = note: 
`#[warn(deprecated)]` on by 
default

warning: use of deprecated 
method `soroban_sdk::events:
:Events::publish`: use the 
#[contractevent] macro on a 
contract event type
  --> outcome_manager\src\ev
ents.rs:13:18
   |
13 |     
env.events().publish(
   |                  
^^^^^^^

warning: use of deprecated 
method `soroban_sdk::events:
:Events::publish`: use the 
#[contractevent] macro on a 
contract event type
  --> outcome_manager\src\ev
ents.rs:21:18
   |
21 |     
env.events().publish(
   |                  
^^^^^^^

warning: use of deprecated 
method `soroban_sdk::Env::re
gister_contract`: use 
`register`
  --> outcome_manager\src\te
st.rs:62:27
   |
62 |     let contract_id = 
env.register_contract(None, 
OutcomeManager);
   |                        
   ^^^^^^^^^^^^^^^^^

warning: use of deprecated 
method `soroban_sdk::Env::re
gister_contract`: use 
`register`
  --> outcome_manager\src\te
st.rs:84:27
   |
84 |     let contract_id = 
env.register_contract(None, 
OutcomeManager);
   |                        
   ^^^^^^^^^^^^^^^^^

warning: use of deprecated 
method `soroban_sdk::Env::re
gister_contract`: use 
`register`
   --> outcome_manager\src\t
est.rs:114:27
    |
114 |     let contract_id = 
env.register_contract(None, 
OutcomeManager);
    |                       
    ^^^^^^^^^^^^^^^^^

warning: use of deprecated 
method `soroban_sdk::Env::re
gister_contract`: use 
`register`
   --> outcome_manager\src\t
est.rs:133:27
    |
133 |     let contract_id = 
env.register_contract(None, 
OutcomeManager);
    |                       
    ^^^^^^^^^^^^^^^^^

warning: hiding a lifetime 
that's elided elsewhere is 
confusing
  --> outcome_manager\src\te
st.rs:58:29
   |
58 | fn 
setup_single_oracle(env: 
&Env) -> (Address, Address, 
BytesN<32>, BytesN<32>, 
OutcomeManagerClient) {
   |                        
     ^^^^ the lifetime is 
elided here                 
   ^^^^^^^^^^^^^^^^^^^^ the 
same lifetime is hidden here
   |
   = help: the same 
lifetime is referred to in 
inconsistent ways, making 
the signature confusing
   = note: `#[warn(mismatche
d_lifetime_syntaxes)]` on 
by default
help: use `'_` for type 
paths
   |
58 | fn 
setup_single_oracle(env: 
&Env) -> (Address, Address, 
BytesN<32>, BytesN<32>, 
OutcomeManagerClient<'_>) {
   |                        
                            
                            
                     ++++

warning: `outcome-manager` 
(lib test) generated 10 
warnings (run `cargo fix 
--lib -p outcome-manager 
--tests` to apply 3 
suggestions)
    Finished `test` profile 
[unoptimized + debuginfo] 
target(s) in 0.39s
     Running unittests 
src\lib.rs (target\debug\dep
s\outcome_manager-61e42c4ec9
869403.exe)

running 6 tests
test test::test_payout_calculation ... ok
test test::test_initialize_quorum_zero_fails - should panic ... FAILED
test test::test_initialize_twice_fails - should panic ... FAILED
test test::test_initialize_success ... FAILED
test test::test_submit_unauthorized_oracle_fails - should panic ... ok
test test::test_quorum_reached_with_two_oracles ... FAILED

failures:

---- test::test_initialize_quorum_zero_fails stdout ----

thread 'test::test_initialize_quorum_zero_fails' (3132) panicked at C:\Users\HP\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\soroban-env-host-23.0.1\src\host.rs:861:9:
HostError: Error(Auth, InvalidAction)

Event log (newest first):
   0: [Diagnostic Event] topics:[error, Error(Auth, InvalidAction)], data:"escalating error to panic"
   1: [Diagnostic Event] topics:[error, Error(Auth, InvalidAction)], data:["contract call failed", initialize, [CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM, [Bytes(533726f4284ed7e554da80916455784568925500f84f6ca9ecf3b492b6c885f3)], 0]]
   2: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFCT4, topics:[error, Error(Auth, InvalidAction)], data:"caught error from function"
   3: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFCT4, topics:[error, Error(Auth, InvalidAction)], data:"escalating error to panic"
   4: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFCT4, topics:[error, Error(Auth, InvalidAction)], data:["Unauthorized function call for address", CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM]
   5: [Diagnostic Event] topics:[fn_call, CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFCT4, initialize], data:[CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM, [Bytes(533726f4284ed7e554da80916455784568925500f84f6ca9ecf3b492b6c885f3)], 0]

Writing test snapshot file for test "test::test_initialize_quorum_zero_fails" to "test_snapshots\\test\\test_initialize_quorum_zero_fails.1.json".
note: panic did not contain expected string
      panic message: "HostError: Error(Auth, InvalidAction)\n\nEvent log (newest first):\n   0: [Diagnostic Event] topics:[error, Error(Auth, InvalidAction)], data:\"escalating error to panic\"\n   1: [Diagnostic Event] topics:[error, Error(Auth, InvalidAction)], data:[\"contract call failed\", initialize, [CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM, [Bytes(533726f4284ed7e554da80916455784568925500f84f6ca9ecf3b492b6c885f3)], 0]]\n   2: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFCT4, topics:[error, Error(Auth, InvalidAction)], data:\"caught error from function\"\n   3: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFCT4, topics:[error, Error(Auth, InvalidAction)], data:\"escalating error to panic\"\n   4: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFCT4, topics:[error, Error(Auth, InvalidAction)], data:[\"Unauthorized function call for address\", CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM]\n   5: [Diagnostic Event] topics:[fn_call, CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFCT4, initialize], data:[CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM, [Bytes(533726f4284ed7e554da80916455784568925500f84f6ca9ecf3b492b6c885f3)], 0]\n"
 expected substring: "invalid quorum"
---- test::test_initialize_twice_fails stdout ----

thread 'test::test_initialize_twice_fails' (18856) panicked at C:\Users\HP\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\soroban-env-host-23.0.1\src\host.rs:861:9:
HostError: Error(Auth, InvalidAction)

Event log (newest first):
   0: [Diagnostic Event] topics:[error, Error(Auth, InvalidAction)], data:"escalating error to panic"
   1: [Diagnostic Event] topics:[error, Error(Auth, InvalidAction)], data:["contract call failed", initialize, [CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM, [Bytes(0807ad6c8e2be7c38a195a1bc06685af9d640e43a7571241412eb4d5074a5c38)], 1]]
   2: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFCT4, topics:[error, Error(Auth, InvalidAction)], data:"caught error from function"
   3: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFCT4, topics:[error, Error(Auth, InvalidAction)], data:"escalating error to panic"
   4: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFCT4, topics:[error, Error(Auth, InvalidAction)], data:["Unauthorized function call for address", CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM]
   5: [Diagnostic Event] topics:[fn_call, CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFCT4, initialize], data:[CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM, [Bytes(0807ad6c8e2be7c38a195a1bc06685af9d640e43a7571241412eb4d5074a5c38)], 1]

note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
Writing test snapshot file for test "test::test_initialize_twice_fails" to "test_snapshots\\test\\test_initialize_twice_fails.1.json".
note: panic did not contain expected string
      panic message: "HostError: Error(Auth, InvalidAction)\n\nEvent log (newest first):\n   0: [Diagnostic Event] topics:[error, Error(Auth, InvalidAction)], data:\"escalating error to panic\"\n   1: [Diagnostic Event] topics:[error, Error(Auth, InvalidAction)], data:[\"contract call failed\", initialize, [CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM, [Bytes(0807ad6c8e2be7c38a195a1bc06685af9d640e43a7571241412eb4d5074a5c38)], 1]]\n   2: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFCT4, topics:[error, Error(Auth, InvalidAction)], data:\"caught error from function\"\n   3: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFCT4, topics:[error, Error(Auth, InvalidAction)], data:\"escalating error to panic\"\n   4: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFCT4, topics:[error, Error(Auth, InvalidAction)], data:[\"Unauthorized function call for address\", CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM]\n   5: [Diagnostic Event] topics:[fn_call, CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFCT4, initialize], data:[CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM, [Bytes(0807ad6c8e2be7c38a195a1bc06685af9d640e43a7571241412eb4d5074a5c38)], 1]\n"
 expected substring: "already initialized"
---- test::test_initialize_success stdout ----

thread 'test::test_initialize_success' (1144) panicked at C:\Users\HP\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\soroban-env-host-23.0.1\src\host.rs:861:9:
HostError: Error(Auth, InvalidAction)

Event log (newest first):
   0: [Diagnostic Event] topics:[error, Error(Auth, InvalidAction)], data:"escalating error to panic"
   1: [Diagnostic Event] topics:[error, Error(Auth, InvalidAction)], data:["contract call failed", initialize, [CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM, [Bytes(96791fa677ae1e048414db78ba51d0c5040c5e4e51fa4337ef4db9234f672004)], 1]]
   2: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFCT4, topics:[error, Error(Auth, InvalidAction)], data:"caught error from function"
   3: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFCT4, topics:[error, Error(Auth, InvalidAction)], data:"escalating error to panic"
   4: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFCT4, topics:[error, Error(Auth, InvalidAction)], data:["Unauthorized function call for address", CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM]
   5: [Diagnostic Event] topics:[fn_call, CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFCT4, initialize], data:[CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM, [Bytes(96791fa677ae1e048414db78ba51d0c5040c5e4e51fa4337ef4db9234f672004)], 1]

Writing test snapshot file for test "test::test_initialize_success" to "test_snapshots\\test\\test_initialize_success.1.json".

---- test::test_quorum_reached_with_two_oracles stdout ----

thread 'test::test_quorum_reached_with_two_oracles' (8964) panicked at C:\Users\HP\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\soroban-env-host-23.0.1\src\host.rs:861:9:
HostError: Error(Storage, MissingValue)

Event log (newest first):
   0: [Diagnostic Event] topics:[error, Error(Storage, MissingValue)], data:"escalating error to panic"
   1: [Diagnostic Event] topics:[error, Error(Storage, MissingValue)], data:["contract call failed", submit_outcome, [CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHK3M, {call_id: 42, oracle_pubkey: Bytes(db7d90eeec9674e9f5491ee6db6ff67f05a939a74bcb62d85dd1b7b7f8a6b3ba), outcome: 1, price: 150000000, signature: Bytes(295bc63d1c4accbd0a515354a5b588cdea85f18cccaf232da154f7c86cdf3dcaab6fc5736aeda4f26dd102503b1a19f3170eb5f04ad2acc176a09dda8cac0d00), timestamp: 9000}]]
   2: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFCT4, topics:[error, Error(Storage, MissingValue)], data:"caught error from function"
   3: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFCT4, topics:[error, Error(Storage, MissingValue)], data:"escalating error to panic"
   4: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFCT4, topics:[error, Error(Storage, MissingValue)], data:["contract call failed", resolve_c, [42, 1, 150000000]]
   5: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFCT4, topics:[error, Error(Storage, MissingValue)], data:"trying to get non-existing value for contract instance"
   6: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFCT4, topics:[fn_call, CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHK3M, resolve_c], data:[42, 1, 150000000]
   7: [Failed Contract Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFCT4, topics:[outcome, submitted], data:[42, Bytes(db7d90eeec9674e9f5491ee6db6ff67f05a939a74bcb62d85dd1b7b7f8a6b3ba), 1]
   8: [Diagnostic Event] topics:[fn_call, CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFCT4, submit_outcome], data:[CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHK3M, {call_id: 42, oracle_pubkey: Bytes(db7d90eeec9674e9f5491ee6db6ff67f05a939a74bcb62d85dd1b7b7f8a6b3ba), outcome: 1, price: 150000000, signature: Bytes(295bc63d1c4accbd0a515354a5b588cdea85f18cccaf232da154f7c86cdf3dcaab6fc5736aeda4f26dd102503b1a19f3170eb5f04ad2acc176a09dda8cac0d00), timestamp: 9000}]

Writing test snapshot file for test "test::test_quorum_reached_with_two_oracles" to "test_snapshots\\test\\test_quorum_reached_with_two_oracles.1.json".


failures:
    test::test_initialize_quorum_zero_fails
    test::test_initialize_success
    test::test_initialize_twice_fails
    test::test_quorum_reached_with_two_oracles

test result: FAILED. 2 passed; 4 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.09s

error: test failed, to 
rerun pass `-p 
outcome-manager --lib`
