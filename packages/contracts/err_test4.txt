cargo :    Compiling 
outcome-manager v0.0.0 (C:\U
sers\HP\Desktop\BACKit-onSte
llar\packages\contracts\outc
ome_manager)
At line:1 char:1
+ cargo test --package 
outcome-manager 2>&1 | 
Out-File -FilePath err_te 
...
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~
~~~~~~~~~~~~~~~
    + CategoryInfo          
    : NotSpecified: (   Co  
  mpiling ou...utcome_man   
 ager):String) [], Remot    
eException
    + FullyQualifiedErrorId 
    : NativeCommandError
 
warning: unused imports: 
`Bytes` and `Ledger`
 --> outcome_manager\src\tes
t.rs:4:31
  |
4 |     testutils::{Address 
as _, Ledger},
  |                         
      ^^^^^^
5 |     Address, Bytes, 
BytesN, Env, Vec,
  |              ^^^^^
  |
  = note: 
`#[warn(unused_imports)]` 
(part of `#[warn(unused)]`) 
on by default

warning: unused import: 
`Outcome`
 --> outcome_manager\src\tes
t.rs:9:22
  |
9 | use 
crate::storage::{Outcome, 
SignedOutcome};
  |                      
^^^^^^^

warning: use of deprecated 
method `soroban_sdk::events:
:Events::publish`: use the 
#[contractevent] macro on a 
contract event type
 --> outcome_manager\src\eve
nts.rs:5:18
  |
5 |     
env.events().publish(
  |                  ^^^^^^^
  |
  = note: 
`#[warn(deprecated)]` on by 
default

warning: use of deprecated 
method `soroban_sdk::events:
:Events::publish`: use the 
#[contractevent] macro on a 
contract event type
  --> outcome_manager\src\ev
ents.rs:13:18
   |
13 |     
env.events().publish(
   |                  
^^^^^^^

warning: use of deprecated 
method `soroban_sdk::events:
:Events::publish`: use the 
#[contractevent] macro on a 
contract event type
  --> outcome_manager\src\ev
ents.rs:21:18
   |
21 |     
env.events().publish(
   |                  
^^^^^^^

warning: use of deprecated 
method `soroban_sdk::Env::re
gister_contract`: use 
`register`
  --> outcome_manager\src\te
st.rs:62:27
   |
62 |     let contract_id = 
env.register_contract(None, 
OutcomeManager);
   |                        
   ^^^^^^^^^^^^^^^^^

warning: use of deprecated 
method `soroban_sdk::Env::re
gister_contract`: use 
`register`
  --> outcome_manager\src\te
st.rs:84:27
   |
84 |     let contract_id = 
env.register_contract(None, 
OutcomeManager);
   |                        
   ^^^^^^^^^^^^^^^^^

warning: use of deprecated 
method `soroban_sdk::Env::re
gister_contract`: use 
`register`
   --> outcome_manager\src\t
est.rs:114:27
    |
114 |     let contract_id = 
env.register_contract(None, 
OutcomeManager);
    |                       
    ^^^^^^^^^^^^^^^^^

warning: use of deprecated 
method `soroban_sdk::Env::re
gister_contract`: use 
`register`
   --> outcome_manager\src\t
est.rs:133:27
    |
133 |     let contract_id = 
env.register_contract(None, 
OutcomeManager);
    |                       
    ^^^^^^^^^^^^^^^^^

warning: hiding a lifetime 
that's elided elsewhere is 
confusing
  --> outcome_manager\src\te
st.rs:58:29
   |
58 | fn 
setup_single_oracle(env: 
&Env) -> (Address, Address, 
BytesN<32>, BytesN<32>, 
OutcomeManagerClient) {
   |                        
     ^^^^ the lifetime is 
elided here                 
   ^^^^^^^^^^^^^^^^^^^^ the 
same lifetime is hidden here
   |
   = help: the same 
lifetime is referred to in 
inconsistent ways, making 
the signature confusing
   = note: `#[warn(mismatche
d_lifetime_syntaxes)]` on 
by default
help: use `'_` for type 
paths
   |
58 | fn 
setup_single_oracle(env: 
&Env) -> (Address, Address, 
BytesN<32>, BytesN<32>, 
OutcomeManagerClient<'_>) {
   |                        
                            
                            
                     ++++

warning: `outcome-manager` 
(lib test) generated 10 
warnings (run `cargo fix 
--lib -p outcome-manager 
--tests` to apply 3 
suggestions)
    Finished `test` profile 
[unoptimized + debuginfo] 
target(s) in 4.58s
     Running unittests 
src\lib.rs (target\debug\dep
s\outcome_manager-61e42c4ec9
869403.exe)

running 6 tests
test test::test_payout_calculation ... ok
test test::test_initialize_twice_fails - should panic ... FAILED
test test::test_initialize_success ... FAILED
test test::test_initialize_quorum_zero_fails - should panic ... FAILED
test test::test_submit_unauthorized_oracle_fails - should panic ... ok
test test::test_quorum_reached_with_two_oracles ... FAILED

failures:

---- test::test_initialize_twice_fails stdout ----

thread 'test::test_initialize_twice_fails' (12992) panicked at C:\Users\HP\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\soroban-env-host-23.0.1\src\host.rs:861:9:
HostError: Error(Auth, InvalidAction)

Event log (newest first):
   0: [Diagnostic Event] topics:[error, Error(Auth, InvalidAction)], data:"escalating error to panic"
   1: [Diagnostic Event] topics:[error, Error(Auth, InvalidAction)], data:["contract call failed", initialize, [CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM, [Bytes(a3c7a845862a017147f7a376261a0a1d8ad1d6bad4fcbbc8166ef0c0c1ae10f9)], 1]]
   2: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFCT4, topics:[error, Error(Auth, InvalidAction)], data:"caught error from function"
   3: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFCT4, topics:[error, Error(Auth, InvalidAction)], data:"escalating error to panic"
   4: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFCT4, topics:[error, Error(Auth, InvalidAction)], data:["Unauthorized function call for address", CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM]
   5: [Diagnostic Event] topics:[fn_call, CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFCT4, initialize], data:[CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM, [Bytes(a3c7a845862a017147f7a376261a0a1d8ad1d6bad4fcbbc8166ef0c0c1ae10f9)], 1]

Writing test snapshot file for test "test::test_initialize_twice_fails" to "test_snapshots\\test\\test_initialize_twice_fails.1.json".
note: panic did not contain expected string
      panic message: "HostError: Error(Auth, InvalidAction)\n\nEvent log (newest first):\n   0: [Diagnostic Event] topics:[error, Error(Auth, InvalidAction)], data:\"escalating error to panic\"\n   1: [Diagnostic Event] topics:[error, Error(Auth, InvalidAction)], data:[\"contract call failed\", initialize, [CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM, [Bytes(a3c7a845862a017147f7a376261a0a1d8ad1d6bad4fcbbc8166ef0c0c1ae10f9)], 1]]\n   2: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFCT4, topics:[error, Error(Auth, InvalidAction)], data:\"caught error from function\"\n   3: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFCT4, topics:[error, Error(Auth, InvalidAction)], data:\"escalating error to panic\"\n   4: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFCT4, topics:[error, Error(Auth, InvalidAction)], data:[\"Unauthorized function call for address\", CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM]\n   5: [Diagnostic Event] topics:[fn_call, CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFCT4, initialize], data:[CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM, [Bytes(a3c7a845862a017147f7a376261a0a1d8ad1d6bad4fcbbc8166ef0c0c1ae10f9)], 1]\n"
 expected substring: "already initialized"
---- test::test_initialize_success stdout ----

thread 'test::test_initialize_success' (14916) panicked at C:\Users\HP\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\soroban-env-host-23.0.1\src\host.rs:861:9:
HostError: Error(Auth, InvalidAction)

Event log (newest first):
   0: [Diagnostic Event] topics:[error, Error(Auth, InvalidAction)], data:"escalating error to panic"
   1: [Diagnostic Event] topics:[error, Error(Auth, InvalidAction)], data:["contract call failed", initialize, [CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM, [Bytes(a12df1f4bdafe2d551b113446b73e8dbde063fba99af813c3d1fa866f0018bf8)], 1]]
   2: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFCT4, topics:[error, Error(Auth, InvalidAction)], data:"caught error from function"
   3: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFCT4, topics:[error, Error(Auth, InvalidAction)], data:"escalating error to panic"
   4: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFCT4, topics:[error, Error(Auth, InvalidAction)], data:["Unauthorized function call for address", CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM]
   5: [Diagnostic Event] topics:[fn_call, CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFCT4, initialize], data:[CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM, [Bytes(a12df1f4bdafe2d551b113446b73e8dbde063fba99af813c3d1fa866f0018bf8)], 1]

Writing test snapshot file for test "test::test_initialize_success" to "test_snapshots\\test\\test_initialize_success.1.json".

---- test::test_initialize_quorum_zero_fails stdout ----

thread 'test::test_initialize_quorum_zero_fails' (11152) panicked at C:\Users\HP\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\soroban-env-host-23.0.1\src\host.rs:861:9:
HostError: Error(Auth, InvalidAction)

Event log (newest first):
   0: [Diagnostic Event] topics:[error, Error(Auth, InvalidAction)], data:"escalating error to panic"
   1: [Diagnostic Event] topics:[error, Error(Auth, InvalidAction)], data:["contract call failed", initialize, [CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM, [Bytes(bbe5f9fec4012f38c2492192385a79329dc6c8d5281e7c2ed9df61a9b909d62e)], 0]]
   2: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFCT4, topics:[error, Error(Auth, InvalidAction)], data:"caught error from function"
   3: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFCT4, topics:[error, Error(Auth, InvalidAction)], data:"escalating error to panic"
   4: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFCT4, topics:[error, Error(Auth, InvalidAction)], data:["Unauthorized function call for address", CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM]
   5: [Diagnostic Event] topics:[fn_call, CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFCT4, initialize], data:[CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM, [Bytes(bbe5f9fec4012f38c2492192385a79329dc6c8d5281e7c2ed9df61a9b909d62e)], 0]

note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
Writing test snapshot file for test "test::test_initialize_quorum_zero_fails" to "test_snapshots\\test\\test_initialize_quorum_zero_fails.1.json".
note: panic did not contain expected string
      panic message: "HostError: Error(Auth, InvalidAction)\n\nEvent log (newest first):\n   0: [Diagnostic Event] topics:[error, Error(Auth, InvalidAction)], data:\"escalating error to panic\"\n   1: [Diagnostic Event] topics:[error, Error(Auth, InvalidAction)], data:[\"contract call failed\", initialize, [CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM, [Bytes(bbe5f9fec4012f38c2492192385a79329dc6c8d5281e7c2ed9df61a9b909d62e)], 0]]\n   2: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFCT4, topics:[error, Error(Auth, InvalidAction)], data:\"caught error from function\"\n   3: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFCT4, topics:[error, Error(Auth, InvalidAction)], data:\"escalating error to panic\"\n   4: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFCT4, topics:[error, Error(Auth, InvalidAction)], data:[\"Unauthorized function call for address\", CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM]\n   5: [Diagnostic Event] topics:[fn_call, CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFCT4, initialize], data:[CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM, [Bytes(bbe5f9fec4012f38c2492192385a79329dc6c8d5281e7c2ed9df61a9b909d62e)], 0]\n"
 expected substring: "invalid quorum"
---- test::test_quorum_reached_with_two_oracles stdout ----

thread 'test::test_quorum_reached_with_two_oracles' (7960) panicked at C:\Users\HP\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\soroban-env-host-23.0.1\src\host.rs:861:9:
HostError: Error(Storage, MissingValue)

Event log (newest first):
   0: [Diagnostic Event] topics:[error, Error(Storage, MissingValue)], data:"escalating error to panic"
   1: [Diagnostic Event] topics:[error, Error(Storage, MissingValue)], data:["contract call failed", submit_outcome, [CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHK3M, {call_id: 42, oracle_pubkey: Bytes(baf7fa63770ccfeb5e4751049562949089e027be42a5876eeb2d7ebad15ca131), outcome: 1, price: 150000000, signature: Bytes(3756f3cb6a3dd09a011005e90fec6ec5224c97061c7293b6f12dbc0f86d8b1353a6a14d6bd9fd9362a3430347993bf43b72388305e91900fae838bbc0b924c00), timestamp: 9000}]]
   2: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFCT4, topics:[error, Error(Storage, MissingValue)], data:"caught error from function"
   3: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFCT4, topics:[error, Error(Storage, MissingValue)], data:"escalating error to panic"
   4: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFCT4, topics:[error, Error(Storage, MissingValue)], data:["contract call failed", resolve_c, [42, 1, 150000000]]
   5: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFCT4, topics:[error, Error(Storage, MissingValue)], data:"trying to get non-existing value for contract instance"
   6: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFCT4, topics:[fn_call, CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHK3M, resolve_c], data:[42, 1, 150000000]
   7: [Failed Contract Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFCT4, topics:[outcome, submitted], data:[42, Bytes(baf7fa63770ccfeb5e4751049562949089e027be42a5876eeb2d7ebad15ca131), 1]
   8: [Diagnostic Event] topics:[fn_call, CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFCT4, submit_outcome], data:[CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHK3M, {call_id: 42, oracle_pubkey: Bytes(baf7fa63770ccfeb5e4751049562949089e027be42a5876eeb2d7ebad15ca131), outcome: 1, price: 150000000, signature: Bytes(3756f3cb6a3dd09a011005e90fec6ec5224c97061c7293b6f12dbc0f86d8b1353a6a14d6bd9fd9362a3430347993bf43b72388305e91900fae838bbc0b924c00), timestamp: 9000}]

Writing test snapshot file for test "test::test_quorum_reached_with_two_oracles" to "test_snapshots\\test\\test_quorum_reached_with_two_oracles.1.json".


failures:
    test::test_initialize_quorum_zero_fails
    test::test_initialize_success
    test::test_initialize_twice_fails
    test::test_quorum_reached_with_two_oracles

test result: FAILED. 2 passed; 4 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.10s

error: test failed, to 
rerun pass `-p 
outcome-manager --lib`
